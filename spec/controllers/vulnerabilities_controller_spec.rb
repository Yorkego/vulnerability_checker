require 'rails_helper'

RSpec.describe VulnerabilitiesController, type: :controller do
  describe 'GET #index' do
    let(:vulnerability) { create(:vulnerability) }
    subject { get :index }
    before do
      subject
    end
    it { expect(response).to have_http_status(:success) }
    it { expect(response.status).to eq(200) }
    it { expect(response).to render_template('index') }
    it { expect(assigns(:user)).to be_a_new(User) }
    it { expect(assigns(:vulnerabilities)).to eq([vulnerability]) }
  end
end
